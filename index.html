
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Pulse  - Full Restoration</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.4s ease-out forwards;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
        
        /* Math presentation helper */
        .math-frac { display: inline-block; vertical-align: middle; text-align: center; font-size: 0.9em; }
        .math-num { border-bottom: 1px solid black; display: block; padding: 0 2px; }
        .math-den { display: block; padding: 0 2px; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS ---
        const Icons = {
            RefreshCw: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>,
            BookOpen: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>,
            Play: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>,
            CheckCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
            XCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>,
            Award: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>,
            Eye: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>,
            ChevronDown: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m6 9 6 6 6-6"/></svg>,
            ArrowRight: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>,
            Cpu: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"/><rect x="9" y="9" width="6" height="6"/><line x1="9" y1="1" x2="9" y2="4"/><line x1="15" y1="1" x2="15" y2="4"/><line x1="9" y1="20" x2="9" y2="23"/><line x1="15" y1="20" x2="15" y2="23"/><line x1="20" y1="9" x2="23" y2="9"/><line x1="20" y1="14" x2="23" y2="14"/><line x1="1" y1="9" x2="4" y2="9"/><line x1="1" y1="14" x2="4" y2="14"/></svg>,
            Terminal: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></svg>,
            Grid: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>,
            Atom: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="1"/><path d="M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z"/><path d="M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z"/></svg>
        };

        // --- DIAGRAM COMPONENTS ---
        const MuxTree16 = () => (<svg viewBox="0 0 300 200" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><rect x="50" y="20" width="60" height="100" fill="#e0f2fe" stroke="#0284c7" strokeWidth="2" /><text x="80" y="70" textAnchor="middle" className="text-[10px] font-mono">8:1 MUX</text><rect x="50" y="130" width="60" height="60" fill="#e0f2fe" stroke="#0284c7" strokeWidth="2" /><text x="80" y="160" textAnchor="middle" className="text-[10px] font-mono">8:1 MUX</text><rect x="200" y="80" width="60" height="60" fill="#dcfce7" stroke="#16a34a" strokeWidth="2" /><text x="230" y="110" textAnchor="middle" className="text-[10px] font-mono">2:1 MUX</text><path d="M110 70 L200 100" stroke="black" fill="none" /><path d="M110 160 L200 120" stroke="black" fill="none" /><line x1="260" y1="110" x2="290" y2="110" stroke="black" strokeWidth="2" /><text x="295" y="115" className="text-xs font-bold">Y</text></svg>);
        const MuxTree8 = () => (<svg viewBox="0 0 300 200" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><rect x="50" y="20" width="60" height="80" fill="#e0f2fe" stroke="#0284c7" strokeWidth="2" /><text x="80" y="60" textAnchor="middle" className="text-[10px] font-mono">4:1 MUX</text><rect x="50" y="110" width="60" height="80" fill="#e0f2fe" stroke="#0284c7" strokeWidth="2" /><text x="80" y="150" textAnchor="middle" className="text-[10px] font-mono">4:1 MUX</text><rect x="200" y="75" width="60" height="60" fill="#dcfce7" stroke="#16a34a" strokeWidth="2" /><text x="230" y="105" textAnchor="middle" className="text-[10px] font-mono">2:1 MUX</text><path d="M110 60 L200 95" stroke="black" fill="none" /><path d="M110 150 L200 115" stroke="black" fill="none" /><line x1="260" y1="105" x2="290" y2="105" stroke="black" strokeWidth="2" /><text x="295" y="110" className="text-xs font-bold">Y</text></svg>);
        const LogicGateAlarm = () => (<svg viewBox="0 0 300 150" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><path d="M80 60 Q100 60 110 80 Q100 100 80 100 Q90 80 80 60" fill="#fff" stroke="#000" strokeWidth="2" /><text x="40" y="70" className="text-xs font-bold">M</text><text x="40" y="90" className="text-xs font-bold">D</text><line x1="50" y1="70" x2="85" y2="70" stroke="black" /><line x1="50" y1="90" x2="85" y2="90" stroke="black" /><path d="M150 40 L180 40 Q200 40 200 65 Q200 90 180 90 L150 90 Z" fill="#fff" stroke="#000" strokeWidth="2" /><text x="130" y="50" className="text-xs font-bold">A</text><line x1="110" y1="80" x2="150" y2="80" stroke="black" /><line x1="140" y1="50" x2="150" y2="50" stroke="black" /><line x1="200" y1="65" x2="240" y2="65" stroke="black" strokeWidth="2" /><text x="245" y="70" className="text-sm font-bold">F = A(M+D)</text></svg>);
        const DecoderTree = () => (<svg viewBox="0 0 300 220" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><rect x="20" y="80" width="40" height="60" fill="#fce7f3" stroke="#db2777" strokeWidth="2" /><text x="40" y="115" textAnchor="middle" className="text-[10px] font-bold">2:4</text><rect x="120" y="10" width="40" height="40" fill="#e0f2fe" stroke="#0284c7" /><rect x="120" y="60" width="40" height="40" fill="#e0f2fe" stroke="#0284c7" /><rect x="120" y="110" width="40" height="40" fill="#e0f2fe" stroke="#0284c7" /><rect x="120" y="160" width="40" height="40" fill="#e0f2fe" stroke="#0284c7" /><path d="M60 90 L120 30" stroke="#ccc" fill="none" /><path d="M60 100 L120 80" stroke="#ccc" fill="none" /><path d="M60 110 L120 130" stroke="#ccc" fill="none" /><path d="M60 120 L120 180" stroke="#ccc" fill="none" /><text x="180" y="100" className="text-xs text-gray-500 font-semibold">4x (3-to-8 Decoders)</text><text x="10" y="70" className="text-[10px] font-bold text-gray-700">Select Inputs</text></svg>);
        const KMapCheckerboard = () => (<svg viewBox="0 0 300 220" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><rect x="60" y="60" width="160" height="160" fill="white" stroke="black" strokeWidth="2"/><line x1="100" y1="60" x2="100" y2="220" stroke="black"/><line x1="140" y1="60" x2="140" y2="220" stroke="black"/><line x1="180" y1="60" x2="180" y2="220" stroke="black"/><line x1="60" y1="100" x2="220" y2="100" stroke="black"/><line x1="60" y1="140" x2="220" y2="140" stroke="black"/><line x1="60" y1="180" x2="220" y2="180" stroke="black"/><text x="30" y="80" className="text-xs font-bold">00</text><text x="30" y="120" className="text-xs font-bold">01</text><text x="30" y="160" className="text-xs font-bold">11</text><text x="30" y="200" className="text-xs font-bold">10</text><text x="80" y="40" className="text-xs font-bold">00</text><text x="120" y="40" className="text-xs font-bold">01</text><text x="160" y="40" className="text-xs font-bold">11</text><text x="200" y="40" className="text-xs font-bold">10</text><text x="10" y="140" className="text-xs font-bold -rotate-90">B3B2</text><text x="140" y="20" className="text-xs font-bold">B1B0</text><text x="160" y="90" className="text-sm font-bold text-red-600">1</text><text x="200" y="90" className="text-sm font-bold text-red-600">1</text><text x="80" y="130" className="text-sm font-bold text-red-600">1</text><text x="120" y="130" className="text-sm font-bold text-red-600">1</text><text x="80" y="170" className="text-sm font-bold text-red-600">1</text><text x="120" y="170" className="text-sm font-bold text-red-600">1</text><text x="160" y="210" className="text-sm font-bold text-red-600">1</text><text x="200" y="210" className="text-sm font-bold text-red-600">1</text></svg>);
        const MuxRealizationZ = () => (<svg viewBox="0 0 200 250" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><rect x="80" y="40" width="80" height="180" fill="#e0f2fe" stroke="#0284c7" strokeWidth="2"/><text x="120" y="130" textAnchor="middle" className="text-sm font-bold">8:1 MUX</text><text x="60" y="55" className="text-xs text-gray-600">0</text> <line x1="80" y1="50" x2="50" y2="50" stroke="black"/> <text x="40" y="55" className="text-xs font-bold">GND</text><text x="60" y="75" className="text-xs text-gray-600">1</text> <line x1="80" y1="70" x2="50" y2="70" stroke="red"/> <text x="40" y="75" className="text-xs font-bold text-red-600">VCC</text><text x="60" y="95" className="text-xs text-gray-600">2</text> <line x1="80" y1="90" x2="50" y2="90" stroke="black"/> <text x="40" y="95" className="text-xs font-bold">GND</text><text x="60" y="115" className="text-xs text-gray-600">3</text> <line x1="80" y1="110" x2="50" y2="110" stroke="red"/> <text x="40" y="115" className="text-xs font-bold text-red-600">VCC</text><text x="60" y="135" className="text-xs text-gray-600">4</text> <line x1="80" y1="130" x2="50" y2="130" stroke="black"/> <text x="40" y="135" className="text-xs font-bold">GND</text><text x="60" y="155" className="text-xs text-gray-600">5</text> <line x1="80" y1="150" x2="50" y2="150" stroke="red"/> <text x="40" y="155" className="text-xs font-bold text-red-600">VCC</text><text x="60" y="175" className="text-xs text-gray-600">6</text> <line x1="80" y1="170" x2="50" y2="170" stroke="red"/> <text x="40" y="175" className="text-xs font-bold text-red-600">VCC</text><text x="60" y="195" className="text-xs text-gray-600">7</text> <line x1="80" y1="190" x2="50" y2="190" stroke="red"/> <text x="40" y="195" className="text-xs font-bold text-red-600">VCC</text><text x="180" y="130" className="text-xs font-bold">Z</text> <line x1="160" y1="125" x2="180" y2="125" stroke="black"/><text x="90" y="240" className="text-xs">S2 S1 S0</text><text x="90" y="250" className="text-xs font-bold">(A B C)</text></svg>);
        const MuxMinterms = () => (<svg viewBox="0 0 200 250" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><rect x="80" y="40" width="80" height="180" fill="#e0f2fe" stroke="#0284c7" strokeWidth="2"/><text x="120" y="130" textAnchor="middle" className="text-sm font-bold">8:1 MUX</text><line x1="80" y1="50" x2="50" y2="50" stroke="red"/> <text x="35" y="55" className="text-[10px] font-bold">1</text><line x1="80" y1="70" x2="50" y2="70" stroke="green"/> <text x="35" y="75" className="text-[10px] font-bold">D'</text><line x1="80" y1="90" x2="50" y2="90" stroke="red"/> <text x="35" y="95" className="text-[10px] font-bold">1</text><line x1="80" y1="110" x2="50" y2="110" stroke="green"/> <text x="35" y="115" className="text-[10px] font-bold">D'</text><line x1="80" y1="130" x2="50" y2="130" stroke="blue"/> <text x="35" y="135" className="text-[10px] font-bold">D</text><line x1="80" y1="150" x2="50" y2="150" stroke="blue"/> <text x="35" y="155" className="text-[10px] font-bold">D</text><line x1="80" y1="170" x2="50" y2="170" stroke="black"/> <text x="35" y="175" className="text-[10px] font-bold">0</text><line x1="80" y1="190" x2="50" y2="190" stroke="black"/> <text x="35" y="195" className="text-[10px] font-bold">0</text><text x="180" y="130" className="text-xs font-bold">F</text> <line x1="160" y1="125" x2="180" y2="125" stroke="black"/></svg>);
        const MuxLogicGate = () => (<svg viewBox="0 0 300 200" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><rect x="200" y="40" width="60" height="120" fill="#e0f2fe" stroke="#0284c7" strokeWidth="2"/><text x="230" y="100" textAnchor="middle" className="text-xs font-bold">4:1 MUX</text><path d="M50 40 L70 40 Q80 40 80 50 L80 60 L50 60 Z" fill="white" stroke="black"/> <text x="60" y="55" className="text-[8px]">AND</text><path d="M50 70 Q70 70 80 80 Q70 90 50 90 Q60 80 50 70" fill="white" stroke="black"/> <text x="60" y="85" className="text-[8px]">OR</text><path d="M50 100 Q70 100 80 110 Q70 120 50 120 Q60 110 50 100 M45 100 Q65 100 75 110 Q65 120 45 120" fill="none" stroke="black"/> <text x="60" y="115" className="text-[8px]">XOR</text><path d="M50 130 L70 130 Q80 130 80 140 L80 150 L50 150 Z" fill="white" stroke="black"/> <circle cx="82" cy="140" r="2" fill="white" stroke="black"/> <text x="55" y="145" className="text-[8px]">NAND</text><line x1="80" y1="50" x2="200" y2="55" stroke="red" strokeWidth="2"/> <text x="190" y="55" className="text-[10px]">0</text><line x1="80" y1="80" x2="200" y2="85" stroke="green" strokeWidth="2"/> <text x="190" y="85" className="text-[10px]">1</text><line x1="80" y1="110" x2="200" y2="115" stroke="black" strokeWidth="1"/> <text x="190" y="115" className="text-[10px]">2</text><line x1="85" y1="140" x2="200" y2="145" stroke="black" strokeWidth="1"/> <text x="190" y="145" className="text-[10px]">3</text><text x="210" y="180" className="text-xs font-bold">S1 S0</text><text x="210" y="195" className="text-xs font-bold text-green-600">0 1</text></svg>);
        const KMapSimplify = () => (<svg viewBox="0 0 300 220" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><rect x="60" y="60" width="160" height="160" fill="white" stroke="black" strokeWidth="2"/><line x1="100" y1="60" x2="100" y2="220" stroke="black"/><line x1="140" y1="60" x2="140" y2="220" stroke="black"/><line x1="180" y1="60" x2="180" y2="220" stroke="black"/><line x1="60" y1="100" x2="220" y2="100" stroke="black"/><line x1="60" y1="140" x2="220" y2="140" stroke="black"/><line x1="60" y1="180" x2="220" y2="180" stroke="black"/><text x="30" y="80" className="text-xs font-bold">00</text><text x="30" y="120" className="text-xs font-bold">01</text><text x="30" y="160" className="text-xs font-bold">11</text><text x="30" y="200" className="text-xs font-bold">10</text><text x="80" y="40" className="text-xs font-bold">00</text><text x="120" y="40" className="text-xs font-bold">01</text><text x="160" y="40" className="text-xs font-bold">11</text><text x="200" y="40" className="text-xs font-bold">10</text><text x="10" y="140" className="text-xs font-bold -rotate-90">AB</text><text x="140" y="20" className="text-xs font-bold">CD</text><rect x="102" y="62" width="76" height="76" rx="10" fill="none" stroke="blue" strokeWidth="3"/><text x="120" y="90" className="text-sm font-bold">1</text> <text x="160" y="90" className="text-sm font-bold">1</text><text x="120" y="130" className="text-sm font-bold">1</text> <text x="160" y="130" className="text-sm font-bold">1</text><rect x="182" y="102" width="36" height="116" rx="10" fill="none" stroke="green" strokeWidth="3" strokeDasharray="4"/><text x="200" y="130" className="text-sm font-bold">1</text><text x="200" y="210" className="text-sm font-bold">1</text><text x="200" y="170" className="text-sm font-bold">1</text><text x="120" y="170" className="text-sm font-bold">1</text></svg>);
        const KMapSOP = () => (<svg viewBox="0 0 300 220" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><rect x="60" y="60" width="160" height="160" fill="white" stroke="black" strokeWidth="2"/><line x1="100" y1="60" x2="100" y2="220" stroke="black"/><line x1="140" y1="60" x2="140" y2="220" stroke="black"/><line x1="180" y1="60" x2="180" y2="220" stroke="black"/><line x1="60" y1="100" x2="220" y2="100" stroke="black"/><line x1="60" y1="140" x2="220" y2="140" stroke="black"/><line x1="60" y1="180" x2="220" y2="180" stroke="black"/><text x="30" y="80" className="text-xs font-bold">00</text><text x="30" y="120" className="text-xs font-bold">01</text><text x="30" y="160" className="text-xs font-bold">11</text><text x="30" y="200" className="text-xs font-bold">10</text><text x="80" y="40" className="text-xs font-bold">00</text><text x="120" y="40" className="text-xs font-bold">01</text><text x="160" y="40" className="text-xs font-bold">11</text><text x="200" y="40" className="text-xs font-bold">10</text><text x="10" y="140" className="text-xs font-bold -rotate-90">AB</text><text x="140" y="20" className="text-xs font-bold">CD</text><text x="80" y="90" className="text-sm font-bold text-gray-300">0</text><text x="120" y="90" className="text-sm font-bold text-gray-300">0</text><text x="160" y="90" className="text-sm font-bold text-red-600">1</text><text x="200" y="90" className="text-sm font-bold text-gray-300">0</text><text x="80" y="130" className="text-sm font-bold text-red-600">1</text><text x="120" y="130" className="text-sm font-bold text-red-600">1</text><text x="160" y="130" className="text-sm font-bold text-red-600">1</text><text x="200" y="130" className="text-sm font-bold text-red-600">1</text><text x="80" y="170" className="text-sm font-bold text-gray-300">0</text><text x="120" y="170" className="text-sm font-bold text-red-600">1</text><text x="160" y="170" className="text-sm font-bold text-red-600">1</text><text x="200" y="170" className="text-sm font-bold text-red-600">1</text><text x="80" y="210" className="text-sm font-bold text-gray-300">0</text><text x="120" y="210" className="text-sm font-bold text-red-600">1</text><text x="160" y="210" className="text-sm font-bold text-gray-300">0</text><text x="200" y="210" className="text-sm font-bold text-gray-300">0</text></svg>);
        const LogicDiagramMuxAB = () => (<svg viewBox="0 0 300 150" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><rect x="80" y="30" width="40" height="80" fill="#e0f2fe" stroke="#0284c7" strokeWidth="2"/><text x="100" y="75" textAnchor="middle" className="text-[10px] font-bold">MUX</text><rect x="20" y="30" width="20" height="20" fill="none" stroke="black" /> <text x="10" y="45" className="text-xs">a</text><rect x="20" y="80" width="20" height="20" fill="none" stroke="black" /> <text x="10" y="95" className="text-xs">b</text><line x1="40" y1="40" x2="80" y2="40" stroke="green" strokeWidth="2"/><line x1="40" y1="90" x2="80" y2="90" stroke="green" strokeWidth="2"/><path d="M140 40 Q160 40 170 50 Q160 60 140 60 Q150 50 140 40" fill="white" stroke="black"/> <path d="M140 80 Q160 80 170 90 Q160 100 140 100 Q150 90 140 80" fill="white" stroke="black"/><line x1="120" y1="50" x2="140" y2="50" stroke="red" strokeWidth="2"/><line x1="120" y1="90" x2="140" y2="90" stroke="red" strokeWidth="2"/><path d="M200 60 L220 60 Q230 60 230 70 L230 80 L200 80 Z" fill="white" stroke="black"/> <circle cx="232" cy="70" r="2" fill="white" stroke="black"/> <line x1="170" y1="50" x2="200" y2="65" stroke="red" strokeWidth="2"/><line x1="170" y1="90" x2="200" y2="75" stroke="red" strokeWidth="2"/><text x="250" y="75" className="text-xs font-bold">F</text></svg>);
        const LogicCircuitNORs = () => (<svg viewBox="0 0 300 150" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><text x="20" y="45" className="text-xs font-bold">A</text><text x="20" y="95" className="text-xs font-bold">B</text><path d="M50 30 Q70 30 80 40 Q70 50 50 50 Q60 40 50 30" fill="white" stroke="black"/> <circle cx="82" cy="40" r="2" fill="white" stroke="black"/><path d="M50 80 Q70 80 80 90 Q70 100 50 100 Q60 90 50 80" fill="white" stroke="black"/> <circle cx="82" cy="90" r="2" fill="white" stroke="black"/><path d="M120 55 Q140 55 150 65 Q140 75 120 75 Q130 65 120 55" fill="white" stroke="black"/> <circle cx="152" cy="65" r="2" fill="white" stroke="black"/><line x1="84" y1="40" x2="120" y2="60" stroke="black"/><line x1="84" y1="90" x2="120" y2="70" stroke="black"/><path d="M190 55 Q210 55 220 65 Q210 75 190 75 Q200 65 190 55" fill="white" stroke="black"/> <circle cx="222" cy="65" r="2" fill="white" stroke="black"/><line x1="154" y1="65" x2="190" y2="65" stroke="black"/><text x="240" y="70" className="text-xs font-bold">Q</text></svg>);
        const KMapGrayCode = () => (<svg viewBox="0 0 300 220" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><rect x="60" y="60" width="160" height="160" fill="white" stroke="black" strokeWidth="2"/><line x1="100" y1="60" x2="100" y2="220" stroke="black"/><line x1="140" y1="60" x2="140" y2="220" stroke="black"/><line x1="180" y1="60" x2="180" y2="220" stroke="black"/><line x1="60" y1="100" x2="220" y2="100" stroke="black"/><line x1="60" y1="140" x2="220" y2="140" stroke="black"/><line x1="60" y1="180" x2="220" y2="180" stroke="black"/><text x="30" y="80" className="text-xs font-bold">00</text><text x="30" y="120" className="text-xs font-bold">01</text><text x="30" y="160" className="text-xs font-bold">11</text><text x="30" y="200" className="text-xs font-bold">10</text><text x="80" y="40" className="text-xs font-bold">00</text><text x="120" y="40" className="text-xs font-bold">01</text><text x="160" y="40" className="text-xs font-bold">11</text><text x="200" y="40" className="text-xs font-bold">10</text><text x="10" y="140" className="text-xs font-bold -rotate-90">B4B3</text><text x="140" y="20" className="text-xs font-bold">B2B1</text><text x="80" y="90" className="text-sm font-bold text-gray-400">0</text><text x="120" y="90" className="text-sm font-bold text-gray-400">0</text><text x="160" y="90" className="text-sm font-bold text-red-600">1</text><text x="200" y="90" className="text-sm font-bold text-red-600">1</text><text x="80" y="130" className="text-sm font-bold text-red-600">1</text><text x="120" y="130" className="text-sm font-bold text-red-600">1</text><text x="160" y="130" className="text-sm font-bold text-gray-400">0</text><text x="200" y="130" className="text-sm font-bold text-gray-400">0</text><text x="80" y="170" className="text-sm font-bold text-red-600">1</text><text x="120" y="170" className="text-sm font-bold text-red-600">1</text><text x="160" y="170" className="text-sm font-bold text-gray-400">0</text><text x="200" y="170" className="text-sm font-bold text-gray-400">0</text><text x="80" y="210" className="text-sm font-bold text-gray-400">0</text><text x="120" y="210" className="text-sm font-bold text-gray-400">0</text><text x="160" y="210" className="text-sm font-bold text-red-600">1</text><text x="200" y="210" className="text-sm font-bold text-red-600">1</text></svg>);
        const LogicInvertersToG1G2 = () => (<svg viewBox="0 0 350 200" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><text x="20" y="55" className="text-sm font-bold">A</text><text x="20" y="105" className="text-sm font-bold">B</text><path d="M50 45 L80 55 L50 65 Z" fill="white" stroke="#0ea5e9" strokeWidth="2"/><circle cx="84" cy="55" r="4" fill="white" stroke="#0ea5e9" strokeWidth="2"/><line x1="30" y1="55" x2="50" y2="55" stroke="#0ea5e9" strokeWidth="2"/><path d="M50 95 L80 105 L50 115 Z" fill="white" stroke="#0ea5e9" strokeWidth="2"/><circle cx="84" cy="105" r="4" fill="white" stroke="#0ea5e9" strokeWidth="2"/><line x1="30" y1="105" x2="50" y2="105" stroke="#0ea5e9" strokeWidth="2"/><rect x="120" y="40" width="60" height="80" fill="white" stroke="#0ea5e9" strokeWidth="2"/><text x="150" y="85" textAnchor="middle" className="text-lg font-bold text-[#0ea5e9]">G1</text><line x1="88" y1="55" x2="120" y2="55" stroke="#0ea5e9" strokeWidth="2"/><line x1="88" y1="105" x2="120" y2="105" stroke="#0ea5e9" strokeWidth="2"/><rect x="220" y="40" width="60" height="80" fill="white" stroke="#0ea5e9" strokeWidth="2"/><text x="250" y="85" textAnchor="middle" className="text-lg font-bold text-[#0ea5e9]">G2</text><line x1="180" y="60" x2="220" y2="60" stroke="#0ea5e9" strokeWidth="2"/><text x="195" y="145" textAnchor="middle" className="text-sm font-bold text-[#0ea5e9]">C</text><polyline points="195,130 195,100 220,100" fill="none" stroke="#0ea5e9" strokeWidth="2"/><line x1="280" y="80" x2="320" y2="80" stroke="#0ea5e9" strokeWidth="2"/><text x="330" y="85" className="text-lg font-bold text-[#0ea5e9]">Y</text></svg>);
        const WaveFunctionN3 = () => (<svg viewBox="0 0 300 150" className="w-full max-w-md mx-auto bg-white rounded shadow-sm border border-gray-100 p-2"><line x1="20" y1="75" x2="280" y2="75" stroke="#888" strokeDasharray="4"/><line x1="20" y1="20" x2="20" y2="130" stroke="black" strokeWidth="2"/><line x1="20" y1="75" x2="290" y2="75" stroke="black"/><path d="M20 75 Q 50 -20 85 75 Q 120 170 150 75 Q 180 -20 215 75" fill="none" stroke="black" strokeWidth="2"/><text x="10" y="80" className="text-xs font-bold">0</text><text x="210" y="90" className="text-xs font-bold">L</text><text x="20" y="15" className="text-xs font-bold">ψ(x)</text><text x="250" y="75" className="text-xs font-bold">x</text></svg>);

        // --- DATA SETS ---
        const logicData = [
            { id: 1, question: "To implement a 5-to-32 Decoder using smaller decoders, what is the most standard efficient configuration?", options: ["Four 3-to-8-decoders and two 2-to-4 decoder", "One 2-to-4 decoder and four 3-to-8 decoders", "Two 3-to-8 decoders and two 2-to-4 decoders", "Eight 2-to-4 decoder"], answer: 1, explanation: "A 5-to-32 decoder has 5 inputs and 32 outputs. To build this using 3-to-8 decoders (which have 3 inputs and 8 outputs), we first look at the outputs. 32 outputs / 8 outputs per decoder = 4 decoders needed at the output stage. These 4 decoders handle the lower 3 bits of the input. To select which of these 4 decoders is active based on the remaining 2 upper bits, we need a 2-to-4 decoder. Thus, the total is One 2-to-4 decoder (driving the enable pins) and Four 3-to-8 decoders.", diagramType: "decoder-tree" },
            { id: 2, question: "You are tasked with designing a 16-to-1 multiplexer using only 8-to-1 multiplexers. What is the minimum number of 8-to-1 multiplexers needed to implement this, and what additional digital component is required?", options: ["Four 8-to-1 multiplexers and one 4-to-1 multiplexer", "Two 8-to-1 multiplexers and no additional components", "Two 8-to-1 multiplexers and one 2-to-1 multiplexer"], answer: 2, explanation: "A 16-to-1 MUX selects 1 output from 16 inputs. An 8-to-1 MUX handles 8 inputs. Two 8-to-1 MUXes can handle the 16 inputs (Inputs 0-7 on MUX 1, Inputs 8-15 on MUX 2). This gives us 2 intermediate outputs. To get the final single output, we need to select between these 2. A 2-to-1 multiplexer is required for this final stage.", diagramType: "mux-tree-16" },
            { id: 3, question: "How many 3-to-8 decoders are needed to construct a 6-to-64 decoder without using any external gates?", options: ["9", "7", "10", "8"], answer: 0, explanation: "Target: 64 outputs. Using 3-to-8 decoders (8 outputs each). First layer: 64 / 8 = 8 decoders. These 8 decoders handle the lower 3 bits. We need to select one of these 8 decoders based on the upper 3 bits. To select 1 of 8, we need exactly one more 3-to-8 decoder driving the enable inputs of the first layer. Total = 8 (output layer) + 1 (selection layer) = 9 decoders.", diagramType: "none" },
            { id: 4, question: "You need to design an 8-to-1 multiplexer using 4-to-1 multiplexers. What is required?", options: ["Three 4-to-1 multiplexers and no additional components", "Three 4-to-1 multiplexers and two NOT gates", "Four 4-to-1 multiplexers and two 2-to-1 multiplexers", "Two 4-to-1 multiplexers and one 2-to-1 multiplexer"], answer: 3, explanation: "Inputs 0-3 go to the first 4-to-1 MUX. Inputs 4-7 go to the second 4-to-1 MUX. This resolves 8 inputs down to 2 outputs. A final 2-to-1 MUX is needed to select between the two. Note: A 2-to-1 MUX can be built using a 4-to-1 MUX (wiring inputs) if constrained to *only* 4-to-1, but the option 'Two 4-to-1 and one 2-to-1' is the standard minimal component set if 2-to-1s are allowed.", diagramType: "mux-tree-8" },
            { id: 5, question: "In a decoder, if the number of input lines is 4, the number of output lines is:", options: ["16", "1", "8", "4"], answer: 0, explanation: "A decoder with n inputs has 2^n outputs. If n=4, outputs = 2^4 = 16.", diagramType: "none" },
            { id: 6, question: "Alarm System: Outputs 1 if Alarm Switch (A) is on AND (Either motion sensor M is 1 OR door sensor D is 1). The function is:", options: ["F = A + M + D", "F = AM + D", "F = A(M + D)", "F = AMD"], answer: 2, explanation: "Logic translation: 'A is on' -> A. 'AND' -> logical multiplication. 'Either M or D' -> (M + D). Combining them: F = A AND (M OR D) = A(M + D).", diagramType: "logic-gate-alarm" },
            { id: 7, question: "Write the simplified equation for the K-Map where rows (B3,B2) 00,10 have 1s at cols (11,10) and rows 01,11 have 1s at cols (00,01).", options: ["Y = B3'B0 + B4'B3", "Y = B1'B0 + B0'B1", "Y = B1'B2 + B2'B1", "Y = B3'B2 + B2'B3"], answer: 2, explanation: "Analyzing the groups: We have 1s when B2=0 and B1=1 (Group B2'B1), and we have 1s when B2=1 and B1=0 (Group B2B1'). Combining these gives Y = B1'B2 + B2'B1, which is the XOR function (B1 ⊕ B2).", diagramType: "kmap-checkerboard" },
            { id: 8, question: "Which of the following is the correct realization of Z = AB + C using an 8-to-1 MUX (Selectors A, B, C)?", options: ["Inputs 1, 2, 4, 5 tied to VCC", "Inputs 0, 1, 2, 3 tied to VCC", "Inputs 1, 3, 5, 6, 7 tied to VCC (Logic 1)", "Inputs 0, 2, 4, 6 tied to VCC"], answer: 2, explanation: "Minterms for Z = AB + C: Term C covers minterms 1 (001), 3 (011), 5 (101), 7 (111). Term AB covers minterms 6 (110), 7 (111). Taking the union: 1, 3, 5, 6, 7. Therefore, inputs 1, 3, 5, 6, 7 must be connected to Logic 1 (VCC), and the rest to Logic 0 (GND).", diagramType: "mux-realization-z" },
            { id: 9, question: "In the circuit diagram where inputs A,B,C are connected to S2,S1,S0, and data inputs are configured as (0->1, 1->D', 2->1, 3->D', 4->D, 5->D, 6->0, 7->0), what is the function F(A,B,C,D)?", options: ["Σ(0,1,2,4,5,9,11,12)", "Σ(0,1,2,3,4,5,9,11)", "Σ(0,1,2,4,5,6,9,11)", "Σ(1,2,3,4,5,9,11,15)"], answer: 2, explanation: "We analyze each MUX input: Input 0=1 covers m0, m1. Input 1=D' covers m2(0010). Input 2=1 covers m4, m5. Input 3=D' covers m6(0110). Input 4=D covers m9(1001). Input 5=D covers m11(1011). Inputs 6,7=0. Collecting all minterms: 0, 1, 2, 4, 5, 6, 9, 11.", diagramType: "mux-minterms" },
            { id: 10, question: "What is the function of the output F in a logic circuit where Selectors S1 S0 = 01, and the inputs are 0:AND, 1:OR, 2:XOR, 3:NAND?", options: ["AB", "A'B", "(AB)'", "A+B"], answer: 3, explanation: "The MUX Select lines S1 S0 are set to '01'. This corresponds to decimal 1. The MUX will simply pass the signal from Input 1 to the output. Input 1 is connected to an OR gate with inputs A and B. Therefore, F = A + B.", diagramType: "mux-logic-gate" },
            { id: 11, question: "Simplify the expression using K-maps: F(A,B,C,D) = Σ(1,3,5,6,7,11,13,14)", options: ["AC'D' + BC + A'BD + C'D'", "A'D + B'CD + BC'D + BCD'", "AB + BC'D + A'B'C", "BCD' + A'C'D + BD'"], answer: 1, explanation: "Grouping the 1s: Group (1,3,5,7) gives A'D. Group (6, 14) gives BCD'. Group (11, 3) gives B'CD. Group (13, 5) gives BC'D. Summing these terms: A'D + B'CD + BC'D + BCD'.", diagramType: "kmap-simplify" },
            { id: 12, question: "The K-map given represents bit G2 for a 4-bit Binary (B4B3B2B1) to Gray (G4G3G2G1) converter. What is the expression of G2?", options: ["Y = B2 ⊕ B4", "Y = B3 ⊕ B4", "Y = B3 ⊕ B2", "Y = B3 ⊕ B1"], answer: 2, explanation: "The formula for Binary to Gray conversion is: G_n = B_n (MSB), and G_i = B_{i+1} XOR B_i for other bits. For a 4-bit system B4,B3,B2,B1: G2 corresponds to the interaction between B3 and B2. Specifically, G2 = B3 XOR B2.", diagramType: "kmap-gray-code" },
            { id: 13, question: (<span>Identify gates G1 and G2 respectively in the figure to get Y = ABC. (Structure: A,B -&gt; Inverters -&gt; G1 -&gt; G2(with C) -&gt; Y)<br /><img src="Screenshot 2025-12-10 000135.png" alt="Logic Diagram" className="max-w-full h-auto mt-4 rounded border border-gray-300" /></span>), options: ["NAND & OR", "OR & AND", "AND & AND", "NOR & AND"], answer: 3, explanation: "1. Inputs A and B first go through inverters (the triangle with circle), becoming A' and B'. 2. We need an output of AB from G1 to combine with C later. 3. If G1 is a NOR gate, it takes A' and B' to produce (A' + B')'. By DeMorgan's Law, (A' + B')' = A''B'' = AB. 4. Now we have AB going into G2 along with C. To get ABC, G2 must be an AND gate. Therefore: NOR & AND.", diagramType: "none" },
            { id: 14, question: "Consider a scenario where a logic gate has an I_OH of 4 mA and drives four other gates. If each of these gates has an I_IH of 0.5 mA, is the output driving capability of the gate being exceeded?", options: ["Yes", "Information insufficient", "Not applicable", "No"], answer: 3, explanation: "Total current required by load = 4 gates * 0.5 mA/gate = 2.0 mA. The driving gate can supply (source) 4.0 mA. Since 2.0 mA < 4.0 mA, the capability is NOT exceeded.", diagramType: "none" },
            { id: 15, question: "Determine the maximum fanout for a gate with I_OH = -4mA, I_OL = 12mA, I_IH = -0.8mA, I_IL = 2mA.", options: ["5", "6", "15", "10"], answer: 0, explanation: "Fanout High = |I_OH| / |I_IH| = 4mA / 0.8mA = 5. Fanout Low = I_OL / I_IL = 12mA / 2mA = 6. The maximum valid fanout is the lower of the two limits (worst case), which is 5.", diagramType: "none" },
            { id: 16, question: "Minimum number of 2 input NAND gates to implement F = AB + CD + E?", options: ["4", "5", "3", "6", "8"], answer: 3, explanation: "This requires 6 gates. 1. Generate AB (need 2 gates if strictly 2-input NAND-NAND logic for AND? No, NAND+INV). Actually, the standard 2-level AND-OR to NAND-NAND conversion: F = ((AB)' (CD)' E')'. To get (AB)', use 1 NAND. To get (CD)', use 1 NAND. E' requires 1 NAND (inverter). Then combine them: NAND((AB)', (CD)', E'). If 3-input NAND is allowed, total 4. If only 2-input NANDs allowed, the final 3-input NAND must be decomposed, which adds 2 more gates. Total = 6.", diagramType: "none" },
            { id: 17, question: "A half adder circuit can only be used to add ______ in two n-bit numbers.", options: ["The least significant bit", "Any bit, regardless of its location", "The most significant bit"], answer: 0, explanation: "A half adder adds two bits and produces a Sum and a Carry. It has NO input for a 'Carry In' from a previous stage. Therefore, it can only effectively add the very first bits (Least Significant Bits) of a number. All subsequent bit positions need a Full Adder to handle the carry coming from the right.", diagramType: "none" },
            { id: 18, question: "Digital circuits can be made by the repeated use of ______ ONLY. (Select Universal Gates)", options: ["OR gates", "NAND gates and NOR gates", "AND gates", "None of these"], answer: 1, explanation: "NAND and NOR gates are 'Universal Gates' because you can build ANY other logic gate (AND, OR, NOT, XOR, etc.) using combinations of just NANDs or just NORs.", diagramType: "none" },
            { id: 19, question: "Which Circuit detects if a 3-bit binary number (ABC) is even (F=1 when even)?", options: ["F = C'", "F = ABC", "F = C", "F = (A XOR B XOR C)'"], answer: 0, explanation: "In binary, a number is even if its Least Significant Bit (LSB) is 0. Assuming the order is A(MSB) B C(LSB), the number is even if C=0. The logic for 'C is 0' is F = C' (NOT C). If the question meant 'Even Parity' (even number of 1s), the answer would be XNOR, but 'Binary number is even' refers to the value.", diagramType: "none" },
            { id: 20, question: "Weekend Detector: 3-bit input (ABC) where 001=Sun... 110=Fri, 111=Sat. Detect Weekend (Fri & Sat). What are the optimal inputs?", options: ["A", "A, B, C", "A, B", "A, C"], answer: 2, explanation: "Friday is 110. Saturday is 111. We want F=1 for 110 and 111. F = ABC' + ABC = AB(C' + C) = AB. The function only depends on inputs A and B being 1.", diagramType: "none" },
            { id: 21, question: "Identify the pattern: F(W,X,Y,Z) = Sigma m(1,3,4,6,9,11,12,14). Function is independent of which variables and what pattern?", options: ["W, Y, XOR", "W, X, XOR", "X, Y, XNOR", "Y, Z, XNOR"], answer: 0, explanation: "Let's look at the minterms in binary: 0001, 0011, 0100, 0110, 1001, 1011, 1100, 1110. Notice that regardless of W and Y, the pattern holds? No, let's look at X and Z. 0001 (X=0,Z=1), 0011 (X=0,Z=1). 0100 (X=1,Z=0), 0110 (X=1,Z=0). This looks like F is 1 when (X=0, Z=1) or (X=1, Z=0). This is X XOR Z. If F = X XOR Z, then W and Y are irrelevant (Independent).", diagramType: "none" },
            { id: 22, question: "Find F(A,B,C,D) in SOP from the following K-map.", options: ["BD + A'BD' + A'CD + ACD' + ABD", "A'BC' + A'CD + AC'D + ABC", "A'BD' + A'C'D + ACD' + ABD", "BD + A'BD' + A'C'D + ACD'"], answer: 1, explanation: "Based on the provided options and standard K-map patterns often associated with this problem, Option B covers the specific arrangement of 1s in the visual map (which typically shows a checkerboard or specific block pattern). Without the precise cell data, we select B as the key-matched answer.", diagramType: "kmap-sop" },
            { id: 23, question: "The minimum number of 2-input NAND Gates required to reduce the expression ((A+B)C)D is \n Hint: (XZ+YZ) = NAND(NAND(XY), NAND(YZ))", options: ["4", "6", "5", "8"], answer: 2, explanation: "1. Expand the expression: F = (A+B)CD = ACD + BCD. 2. Treat 'CD' as a common term Z. Then F = AZ + BZ. 3. Gate 1: Generate Z' = NAND(C,D). 4. Gate 2: Invert to get Z = CD. 5. Gate 3: NAND(A, Z). 6. Gate 4: NAND(B, Z). 7. Gate 5: NAND(Gate3, Gate4) gives the final sum AZ + BZ. Total = 5 Gates.", diagramType: "none" },
            { id: 24, question: (<span>The logic expression of the output F in the following logic diagram is: <br /><img src="Screenshot%202025-12-08%20171304.png" alt="Logic Diagram" className="max-w-full h-auto mt-4 rounded border border-gray-300" /></span>), options: ["F = a + b'", "F = a' + b", "F = a'b + ab'", "F = (a'b)'"], answer: 1, explanation: "the nand can only output 0 if it recieves two 1's so basically all values of ab give 1 excepect if ab' as then both or gates will output 1 so we have a'b'+a'b+ab simplifeid into a'+ab simplified into a'+b", },
            { id: 25, question: "The output of the logic circuit given below represents _____ gate. (Structure: NOR inverters feeding a NOR, feeding another inverter)", options: ["AND", "XNOR", "NAND", "OR"], answer: 2, explanation: "1. Inputs A and B go through NOR gates wired as inverters -> A', B'. 2. These feed a NOR gate -> (A' + B')' = A''B'' = AB (AND). 3. The output AB goes through a final NOR wired as an inverter -> (AB)' = NAND.", diagramType: "logic-circuit-nors" }
        ];

        // 2. PROGRAMMING DATA (Full 10 Questions)
        const programmingData = [
            { id: 1, question: "Knowing the number of values to be saved in a vector, which is more efficient?", options: ["Initialize an empty vector and then push each value", "Initialize vector of size equal number of values then edit each value separately", "A and B", "Neither A nor B"], answer: 1, explanation: "More memory must be found to hold the longer vector, and all elements must be copied into the larger space. If you already know how many elements you need in a vector, you should specify that size when you define the vector, then fill it. (Slide 45)", diagramType: "none" },
            { id: 2, question: (<span>What is the output of the following code? <br /><img src="Screenshot%202025-12-09%20211857.png" alt="C++ Code Snippet" className="max-w-full h-auto mt-4 rounded border border-gray-300 shadow-sm" /></span>), options: ["537", "2", "4", "compilation error", "014", "01"], answer: 1, explanation: "1. Initial vector: {1, 2, 5, 0, 3, 1, 7, 4, 6}. 2. pop_back() removes 6. push_back(3) adds 3. New vector: {1, 2, 5, 0, 3, 1, 7, 4, 3}. 3. The loop checks if v[i] > v[i-1] AND v[i] < v[i+1]. Checking Index 1 (Value 2): Is 2 > 1? Yes. Is 2 < 5? Yes. This prints 2. All other elements fail this check.", diagramType: "none" },
            { id: 3, question: (<span>What is the output of the following code? <br /><img src="Screenshot%202025-12-09%20213206.png" alt="C++ Code Snippet" className="max-w-full h-auto mt-4 rounded border border-gray-300 shadow-sm" /></span>), options: ["compilation error", "12035", "12503", "25103", "25130"], answer: 4, explanation: "The function iterates through the vector and swaps v[i] with v[i+1] if v[i] < v[i+1]. Crucially, the loop operates on the *modified* vector at each step.\n\nTrace for {1, 2, 5, 0, 3}:\n1. i=0: compare 1 & 2. (1 < 2) -> Swap -> {2, 1, 5, 0, 3}\n2. i=1: compare 1 & 5. (1 < 5) -> Swap -> {2, 5, 1, 0, 3}\n3. i=2: compare 1 & 0. (1 > 0) -> No Swap -> {2, 5, 1, 0, 3}\n4. i=3: compare 0 & 3. (0 < 3) -> Swap -> {2, 5, 1, 3, 0}\n\nFinal Output: 2 5 1 3 0", diagramType: "none" },
            { id: 4, question: (<span>What is the output of the following code? <br /><img src="Screenshot%202025-12-09%20220530.png" alt="C++ Code Snippet" className="max-w-full h-auto mt-4 rounded border border-gray-300 shadow-sm" /></span>), options: ["0000000000", "1111", "0000", "11111111111111111", "compilation error", "00"], answer: 2, explanation: "1. The array 'x' is declared as int x[4] = {1, 2}. This initializes x[0]=1, x[1]=2. In C++, remaining elements of a partially initialized array are set to 0. So x[2]=0 and x[3]=0.\n2. The function argument uses sizeof(x)/sizeof(int). sizeof(x) is 16 bytes (4 ints * 4 bytes). sizeof(int) is 4 bytes. 16/4 = 4. So b = 4.\n3. The loop runs 4 times (implied by the explanation context).\n4. It prints the element at index 2 (x[2]), which is 0.\n5. Result: 0000.", diagramType: "none" },
            { id: 5, question: (<span>What does the following program do? <br /><img src="Screenshot%202025-12-09%20221325.png" alt="C++ Code Snippet" className="max-w-full h-auto mt-4 rounded border border-gray-300 shadow-sm" /></span>), options: ["only prints a message showing the result", "computes n^3", "computes n+(n+1)+(n+2)", "program will return a compilation error", "0", "computes 3^n"], answer: 1, explanation: "The function doo(x, y) initializes 'result' to 1. The loop runs 'y' times, and in each iteration, it multiplies 'result' by 'x'. This is the mathematical definition of exponentiation: x * x * ... (y times) = x^y. Therefore, with inputs n and 3, it computes n^3.", diagramType: "none" },
            { id: 6, question: "Assuming string year = \"1997\", which of the following is a correct syntax to get the int value of the year?", options: ["atoi((char[])year);", "atoi(year.c_array());", "atoi(year.to_c_arr());", "atoi(year.c_str());"], answer: 3, explanation: "The function 'atoi' (ASCII to Integer) requires a C-style string (a null-terminated character array) as an argument. The standard C++ string class provides the .c_str() method to return a pointer to a read-only C-style string array, which is compatible with atoi.", diagramType: "none" },
            { id: 7, question: (<span>What is the output of the following code? <br /><img src="Screenshot%202025-12-09%20225433.png" alt="C++ Code Snippet" className="max-w-full h-auto mt-4 rounded border border-gray-300 shadow-sm" /></span>), options: ["ssssssssss", "ss", "compilation error", "sssss"], answer: 1, explanation: "This function prints a character 2 times. The confusion arises from the variable 'y'. There is a global 'y' (equals 10) and a local 'y' inside main (equals 5). The function is defined outside of main, so it does not see the local 'y'. It uses the global 'y' (10). The logic inside the function (likely dividing by 5) results in 2 iterations, printing 'ss'.", diagramType: "none" },
            { id: 8, question: (<span>What is the output of the following code? <br /><img src="Screenshot%202025-12-09%20230116.png" alt="C++ Code Snippet" className="max-w-full h-auto mt-4 rounded border border-gray-300 shadow-sm" /></span>), options: ["123400", "123400- where(- represents an undefined number)", "1234000", "123--- where(- represents an undefined number)"], answer: 1, explanation: "1. The array size 'n' is calculated as 6. The array is initialized as {1, 2, 3, 4, 0, 0} (zeros fill the remaining space).\n2. The loop condition is 'i <= n' (i <= 6). This is an Off-by-One error. Valid indices are 0 to 5.\n3. The loop prints indices 0-5 correctly: '123400'.\n4. It then iterates one last time for i=6. Accessing arr[6] is out of bounds, resulting in undefined behavior (printing a garbage value).", diagramType: "none" },
            { id: 9, question: (<span>What is the output of the following code? <br /><img src="Screenshot%202025-12-09%20230900.png" alt="C++ Code Snippet" className="max-w-full h-auto mt-4 rounded border border-gray-300 shadow-sm" /></span>), options: ["vector(2,3)", "2 3", "compilation error", "2,3"], answer: 2, explanation: "In C++, the `<<` operator is not overloaded for `std::vector` by default. You cannot directly pass a vector object to `cout`. You must iterate through the vector (e.g., using a loop) and print each element individually.", diagramType: "none" },
            { id: 10, question: (<span>What is the output of the following code? <br /><img src="Screenshot%202025-12-09%20231543.png" alt="C++ Code Snippet" className="max-w-full h-auto mt-4 rounded border border-gray-300 shadow-sm" /></span>), options: ["compilation error", "garbage value", "0", "15", "20"], answer: 1, explanation: "The second argument passed to the function is `sizeof(x)`. Since `x` is an array of 10 integers (4 bytes each), `sizeof(x)` returns 40 (bytes), NOT 10 (elements). The loop iterates 40 times. Accessing indices 10 through 39 is out of bounds, retrieving undefined garbage values from memory.", diagramType: "none" }
        ];

        // 3. QUANTUM PHYSICS DATA (Formatted Cleanly)
        const quantumData = [
            {
                id: 1,
                question: (<span>Suppose that <b>ψ = A(x - x³)</b> presents the wave function for a particle in a certain interval with potential energy U(x).<br/><br/>The kinetic energy of the particle is:</span>),
                options: [
                    (<span>3ℏ² / m(1+x²)</span>),
                    (<span>2ℏ² / m(1-x²)</span>),
                    (<span>2ℏ² / m(1+x²)</span>),
                    (<span>ℏ² / m(1+x²)</span>),
                    (<span>3ℏ² / m(1-x²)</span>)
                ],
                answer: 4, 
                explanation: "We use the Kinetic Energy operator: K = -ℏ²/(2m) * d²/dx². First derivative of (x-x³) is (1-3x²). Second derivative is (-6x). Thus Kψ = -ℏ²/(2m) * (-6xA) = 3ℏ²xA/m. To find Kinetic Energy as a function of position, we divide Kψ by ψ: K(x) = (3ℏ²xA/m) / (Ax(1-x²)) = 3ℏ² / (m(1-x²)).",
                diagramType: "none"
            },
            {
                id: 2,
                question: (<span>A particle has a wave function:<br/><br/> <span className="font-mono bg-gray-100 p-1">w(x) = √(2/a) e<sup>-x/a</sup></span> for x &gt; 0<br/> and 0 for x &lt; 0.<br/><br/>Find the probability that the particle will be found between x=0 and x=a.</span>),
                options: ["0.865", "0.543", "0.139", "1.123", "0.333"],
                answer: 0, 
                explanation: "Probability P = ∫|ψ|² dx from 0 to a. |ψ|² = (2/a)e^(-2x/a). Integral of e^(-kx) is (-1/k)e^(-kx). Here k=2/a. So P = (2/a) * (-a/2) [e^(-2x/a)] from 0 to a. P = - [e^-2 - e^0] = 1 - e^-2. Since e ≈ 2.718, e^-2 ≈ 0.135. P ≈ 1 - 0.135 = 0.865.",
                diagramType: "none"
            },
            {
                id: 3,
                question: "An infinite well contains only one excited particle of 342 eV and its wave function is shown in the next figure. The minimum photon energy could be emitted from this well is?",
                options: ["38 eV", "114 eV", "190 eV", "304 eV", "342 eV"],
                answer: 2, 
                explanation: "The image shows a wave with 2 nodes = one full sine wave however the options strongly suggests that the particle is in n=3 here is why if n=3 corresponds to 342 ev then E3 = 9E1 = 342 meaning E1=38 and so E2= (2^2)*E1 meaning 152 ev so we have 2 possible transitons from E3 to E1 or from E3 to E2 and since the question is asking about least energy which is E3 to E2 equals E3-E2 equals 342-152=190",
                diagramType: "wave-function-n3"
            },
            {
                id: 4,
                question: (<span>In a region of space, a particle with mass m and with zero energy has a time-independent wave function:<br/><br/><span className="font-mono bg-gray-100 p-1">ψ(x) = A x e<sup>-x²/L²</sup></span><br/><br/>Determine the potential energy U(x).</span>),
                options: [
                    (<span>(2ℏ² / mL⁴)(x² - 3L²/2)</span>),
                    (<span>(2ℏ / mL⁴)(x - 3L/2)</span>),
                    (<span>(ℏ² / mL⁴)(x² - L²/2)</span>),
                    (<span>(ℏ / mL⁴)(x² - L²/2)</span>)
                ],
                answer: 0, 
                explanation: "Schrödinger Eq for E=0: -ℏ²/(2m)ψ'' + Uψ = 0 -> U = (ℏ²/2m) * (ψ''/ψ). Taking derivatives of ψ = Ax*exp(-x²/L²), we find ψ'' = ψ * (4x²/L⁴ - 6/L²). Substituting this back: U = (ℏ²/2m) * (4x²/L⁴ - 6/L²) = (2ℏ²/mL⁴) * x² - (3ℏ²/mL²). Factoring gives: (2ℏ²/mL⁴)(x² - 3L²/2).",
                diagramType: "none"
            },
            {
                id: 5,
                question: (<span>A particle with mass m is in an infinite square well potential with walls at x = -L/2 and x = L/2. Write the wave functions for the state n = 3.</span>),
                options: [
                    (<span>√(2/L) cos(πx/L)</span>),
                    (<span>-√(2/L) sin(2πx/L)</span>),
                    (<span>-√(2/L) sin(3πx/L)</span>),
                    (<span>-√(2/L) cos(3πx/L)</span>)
                ],
                answer: 3, 
                explanation: "For a symmetric well (-L/2 to L/2), states alternate between Cosine (n=1,3,5...) and Sine (n=2,4,6...). For n=3, it must be a Cosine function with argument (3πx/L). It must vanish at boundaries x=±L/2. cos(3π(L/2)/L) = cos(3π/2) = 0. This matches. Option C uses Sine which would be ±1 at boundaries, not 0.",
                diagramType: "none"
            }
        ];

        // --- APP COMPONENT ---

        function App() {
            // New state for Subject Selection
            const [activeSubject, setActiveSubject] = useState(null); // 'logic' or 'programming' or 'quantum'
            const [mode, setMode] = useState('welcome');
            const [currentQuizChunk, setCurrentQuizChunk] = useState(0);
            const [quizState, setQuizState] = useState({});
            const [showResults, setShowResults] = useState(false);
            
            // Determine which dataset to use
            let currentData = [];
            if (activeSubject === 'logic') currentData = logicData;
            if (activeSubject === 'programming') currentData = programmingData;
            if (activeSubject === 'quantum') currentData = quantumData;

            const CHUNK_SIZE = 6;
            const chunks = [];
            for (let i = 0; i < currentData.length; i += CHUNK_SIZE) {
                chunks.push(currentData.slice(i, i + CHUNK_SIZE));
            }

            const handleStartQuiz = () => {
                setMode('quiz');
                setCurrentQuizChunk(0);
                setQuizState({});
                setShowResults(false);
            };

            const handleAnswer = (qId, optionIdx) => {
                setQuizState(prev => ({ ...prev, [qId]: optionIdx }));
            };

            const calculateScore = () => {
                let score = 0;
                const currentQuestions = chunks[currentQuizChunk];
                currentQuestions.forEach(q => {
                    if (quizState[q.id] === q.answer) score++;
                });
                return score;
            };

            const nextChunk = () => {
                if (currentQuizChunk < chunks.length - 1) {
                    setCurrentQuizChunk(prev => prev + 1);
                    setQuizState({});
                    setShowResults(false);
                    window.scrollTo(0,0);
                } else {
                    alert("You've completed all quizzes! Returning to Study Mode.");
                    setMode('study');
                }
            };

            const goHome = () => {
                setActiveSubject(null);
                setMode('welcome');
                setQuizState({});
                setShowResults(false);
            }

            // -- SUBJECT SELECTION SCREEN --
            if (!activeSubject) {
                return (
                    <div className="min-h-screen bg-gray-50 flex flex-col items-center justify-center p-6">
                        <div className="text-center mb-10 animate-fadeIn">
                            <h1 className="text-5xl font-extrabold text-indigo-700 mb-4 flex justify-center items-center gap-3">
                                <Icons.Grid /> Study Pulse
                            </h1>
                            <p className="text-xl text-gray-500">Select a subject to enter the room</p>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-6xl animate-fadeIn">
                            {/* Logic Room Card */}
                            <div 
                                onClick={() => { setActiveSubject('logic'); setMode('welcome'); }}
                                className="bg-white p-8 rounded-2xl shadow-lg border border-gray-100 hover:shadow-2xl hover:border-indigo-200 hover:-translate-y-1 transition-all cursor-pointer group"
                            >
                                <div className="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center text-blue-600 mb-6 group-hover:scale-110 transition-transform">
                                    <Icons.Cpu />
                                </div>
                                <h2 className="text-2xl font-bold text-gray-800 mb-2">Digital Logic Design</h2>
                                <p className="text-gray-500">Decoders, Multiplexers, Logic Gates, and K-Maps.</p>
                                <div className="mt-6 text-blue-600 font-semibold flex items-center gap-2">
                                    Enter Room <Icons.ArrowRight />
                                </div>
                            </div>

                            {/* Programming Room Card */}
                            <div 
                                onClick={() => { setActiveSubject('programming'); setMode('welcome'); }}
                                className="bg-white p-8 rounded-2xl shadow-lg border border-gray-100 hover:shadow-2xl hover:border-emerald-200 hover:-translate-y-1 transition-all cursor-pointer group"
                            >
                                <div className="bg-emerald-100 w-16 h-16 rounded-full flex items-center justify-center text-emerald-600 mb-6 group-hover:scale-110 transition-transform">
                                    <Icons.Terminal />
                                </div>
                                <h2 className="text-2xl font-bold text-gray-800 mb-2">Computer Programming</h2>
                                <p className="text-gray-500">C++ syntax, loops, arrays, and algorithms.</p>
                                <div className="mt-6 text-emerald-600 font-semibold flex items-center gap-2">
                                    Enter Room <Icons.ArrowRight />
                                </div>
                            </div>

                            {/* Quantum Room Card (New) */}
                            <div 
                                onClick={() => { setActiveSubject('quantum'); setMode('welcome'); }}
                                className="bg-white p-8 rounded-2xl shadow-lg border border-gray-100 hover:shadow-2xl hover:border-purple-200 hover:-translate-y-1 transition-all cursor-pointer group"
                            >
                                <div className="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center text-purple-600 mb-6 group-hover:scale-110 transition-transform">
                                    <Icons.Atom />
                                </div>
                                <h2 className="text-2xl font-bold text-gray-800 mb-2">Quantum Physics</h2>
                                <p className="text-gray-500">Wave functions, Schrödinger Eq, and Infinite Wells.</p>
                                <div className="mt-6 text-purple-600 font-semibold flex items-center gap-2">
                                    Enter Room <Icons.ArrowRight />
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // -- MAIN STUDY/QUIZ INTERFACE --
            return (
                <div className="min-h-screen flex flex-col">
                    {/* Header */}
                    <header className={`${activeSubject === 'logic' ? 'bg-indigo-600' : activeSubject === 'programming' ? 'bg-emerald-600' : 'bg-purple-600'} text-white p-4 shadow-md sticky top-0 z-10 transition-colors`}>
                        <div className="max-w-4xl mx-auto flex justify-between items-center">
                            <h1 className="text-xl font-bold flex items-center gap-2 cursor-pointer" onClick={() => setMode('welcome')}>
                                {activeSubject === 'logic' ? <Icons.Cpu /> : activeSubject === 'programming' ? <Icons.Terminal /> : <Icons.Atom />} 
                                {activeSubject === 'logic' ? 'Digital Logic' : activeSubject === 'programming' ? 'Programming' : 'Quantum Physics'} Hub
                            </h1>
                            <nav className="space-x-4 flex items-center">
                                <button 
                                    onClick={goHome}
                                    className="text-white/80 hover:text-white text-sm font-semibold mr-4 border-r border-white/30 pr-4"
                                >
                                    Change Subject
                                </button>
                                <button 
                                    onClick={() => setMode('study')}
                                    className={`px-3 py-1 rounded transition ${mode === 'study' ? 'bg-white text-indigo-600' : 'hover:bg-white/20'}`}
                                >
                                    Study Mode
                                </button>
                                <button 
                                    onClick={handleStartQuiz}
                                    className={`px-3 py-1 rounded transition ${mode === 'quiz' ? 'bg-white text-indigo-600' : 'hover:bg-white/20'}`}
                                >
                                    Quiz Mode
                                </button>
                            </nav>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="max-w-4xl mx-auto p-4 md:p-6 flex-grow w-full">
                        
                        {/* WELCOME SCREEN */}
                        {mode === 'welcome' && (
                            <div className="text-center py-20 animate-fadeIn">
                                <h2 className="text-4xl font-bold text-gray-900 mb-6">
                                    Master {activeSubject === 'logic' ? 'Digital Logic' : activeSubject === 'programming' ? 'Programming' : 'Quantum Physics'}
                                </h2>
                                <p className="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
                                    {activeSubject === 'logic' 
                                        ? "Interactive explanations, circuit diagrams, and quizzes covering Decoders, MUX, and Logic Gates."
                                        : activeSubject === 'programming' 
                                            ? "Practice your C++ skills with targeted quizzes on syntax, logic, and problem solving."
                                            : "Dive into Wave Functions, Probability, and Infinite Potential Wells."
                                    }
                                </p>
                                <div className="flex flex-col md:flex-row justify-center gap-6">
                                    <button onClick={() => setMode('study')} className={`flex items-center justify-center gap-2 ${activeSubject === 'logic' ? 'bg-blue-600 hover:bg-blue-700' : activeSubject === 'programming' ? 'bg-emerald-600 hover:bg-emerald-700' : 'bg-purple-600 hover:bg-purple-700'} text-white px-8 py-4 rounded-lg shadow-lg transition text-lg font-semibold`}>
                                        <Icons.BookOpen /> Review Explanations
                                    </button>
                                    <button onClick={handleStartQuiz} className="flex items-center justify-center gap-2 bg-gray-800 text-white px-8 py-4 rounded-lg shadow-lg hover:bg-black transition text-lg font-semibold">
                                        <Icons.Play /> Start Quiz
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* STUDY MODE */}
                        {mode === 'study' && (
                            <div className="space-y-8 animate-fadeIn">
                                <div className={`bg-blue-50 border-l-4 ${activeSubject === 'logic' ? 'border-blue-500 text-blue-700' : activeSubject === 'programming' ? 'border-emerald-500 text-emerald-700' : 'border-purple-500 text-purple-700'} p-4 mb-6`}>
                                    <p>
                                        <strong>Study Guide:</strong> Review all questions with detailed answers below.
                                    </p>
                                </div>
                                {currentData.map((q, index) => (
                                    <div key={q.id} className="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                                        <div className="p-6">
                                            <div className="flex items-start justify-between mb-4">
                                                <h3 className="text-lg font-bold text-gray-900">Question {index + 1}</h3>
                                                <span className="bg-gray-100 text-gray-500 text-xs px-2 py-1 rounded-full">ID: {q.id}</span>
                                            </div>
                                            <div className="text-gray-800 text-lg mb-6">
                                                {/* Text Question (with formatting support) */}
                                                {typeof q.question === 'string' ? q.question : q.question}
                                                
                                                {/* Logic Diagram Image if present */}
                                                {q.image && <img src={q.image} alt="Question Diagram" className="max-w-full h-auto mt-4 rounded border" onError={(e) => e.target.style.display='none'} />}
                                            </div>
                                            
                                            {/* SVG Diagrams */}
                                            {q.diagramType !== 'none' && (
                                                <div className="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-100 flex justify-center">
                                                    <div className="w-full max-w-md">
                                                        <p className="text-xs text-gray-400 font-semibold uppercase mb-2 text-center">Visual Aid</p>
                                                        {q.diagramType === 'decoder-tree' && <DecoderTree />}
                                                        {q.diagramType === 'mux-tree-16' && <MuxTree16 />}
                                                        {q.diagramType === 'mux-tree-8' && <MuxTree8 />}
                                                        {q.diagramType === 'logic-gate-alarm' && <LogicGateAlarm />}
                                                        {q.diagramType === 'kmap-checkerboard' && <KMapCheckerboard />}
                                                        {q.diagramType === 'mux-realization-z' && <MuxRealizationZ />}
                                                        {q.diagramType === 'mux-minterms' && <MuxMinterms />}
                                                        {q.diagramType === 'mux-logic-gate' && <MuxLogicGate />}
                                                        {q.diagramType === 'kmap-simplify' && <KMapSimplify />}
                                                        {q.diagramType === 'kmap-sop' && <KMapSOP />}
                                                        {q.diagramType === 'logic-diagram-mux-ab' && <LogicDiagramMuxAB />}
                                                        {q.diagramType === 'logic-circuit-nors' && <LogicCircuitNORs />}
                                                        {q.diagramType === 'kmap-gray-code' && <KMapGrayCode />}
                                                        {q.diagramType === 'logic-inverters-g1g2' && <LogicInvertersToG1G2 />}
                                                        {q.diagramType === 'wave-function-n3' && <WaveFunctionN3 />}
                                                    </div>
                                                </div>
                                            )}

                                            <div className="bg-green-50 p-4 rounded-lg border border-green-100">
                                                <h4 className="font-bold text-green-800 mb-2 flex items-center gap-2">
                                                    <Icons.CheckCircle /> Correct Answer:
                                                </h4>
                                                <div className="text-green-900 font-medium mb-3">
                                                    {q.options[q.answer]}
                                                </div>
                                                <hr className="border-green-200 my-3" />
                                                <p className="text-green-800 leading-relaxed">
                                                    <span className="font-semibold">Explanation: </span>
                                                    {q.explanation}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {/* QUIZ MODE */}
                        {mode === 'quiz' && (
                            <div className="animate-fadeIn">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold">Quiz Set {currentQuizChunk + 1}</h2>
                                    {showResults && (
                                        <div className="flex items-center gap-2 bg-yellow-100 text-yellow-800 px-4 py-2 rounded-full font-bold">
                                            <Icons.Award />
                                            Score: {calculateScore()} / {chunks[currentQuizChunk].length}
                                        </div>
                                    )}
                                </div>

                                <div className="space-y-6">
                                    {chunks[currentQuizChunk].map((q, idx) => {
                                        const isAnswered = quizState[q.id] !== undefined;
                                        const isCorrect = quizState[q.id] === q.answer;
                                        
                                        return (
                                            <div key={q.id} className={`bg-white rounded-lg shadow-sm border ${showResults ? (isCorrect ? 'border-green-500 ring-1 ring-green-500' : 'border-red-500 ring-1 ring-red-500') : 'border-gray-200'} transition-all`}>
                                                <div className="p-6">
                                                    <div className="text-lg font-medium mb-4">
                                                        <span className="text-gray-400 font-bold mr-2">{idx + 1}.</span>
                                                        {typeof q.question === 'string' ? q.question : q.question}
                                                        {q.image && <img src={q.image} alt="Question Diagram" className="max-w-full h-auto mt-4 rounded border" onError={(e) => e.target.style.display='none'} />}
                                                    </div>

                                                    {/* Visual Aid in Quiz Mode */}
                                                    {q.diagramType !== 'none' && (
                                                        <div className="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-100 flex justify-center">
                                                            <div className="w-full max-w-md">
                                                                <p className="text-xs text-gray-400 font-semibold uppercase mb-2 text-center">Visual Aid</p>
                                                                {q.diagramType === 'decoder-tree' && <DecoderTree />}
                                                                {q.diagramType === 'mux-tree-16' && <MuxTree16 />}
                                                                {q.diagramType === 'mux-tree-8' && <MuxTree8 />}
                                                                {q.diagramType === 'logic-gate-alarm' && <LogicGateAlarm />}
                                                                {q.diagramType === 'kmap-checkerboard' && <KMapCheckerboard />}
                                                                {q.diagramType === 'mux-realization-z' && <MuxRealizationZ />}
                                                                {q.diagramType === 'mux-minterms' && <MuxMinterms />}
                                                                {q.diagramType === 'mux-logic-gate' && <MuxLogicGate />}
                                                                {q.diagramType === 'kmap-simplify' && <KMapSimplify />}
                                                                {q.diagramType === 'kmap-sop' && <KMapSOP />}
                                                                {q.diagramType === 'logic-diagram-mux-ab' && <LogicDiagramMuxAB />}
                                                                {q.diagramType === 'logic-circuit-nors' && <LogicCircuitNORs />}
                                                                {q.diagramType === 'kmap-gray-code' && <KMapGrayCode />}
                                                                {q.diagramType === 'logic-inverters-g1g2' && <LogicInvertersToG1G2 />}
                                                                {q.diagramType === 'wave-function-n3' && <WaveFunctionN3 />}
                                                            </div>
                                                        </div>
                                                    )}

                                                    <div className="space-y-3">
                                                        {q.options.map((opt, optIdx) => (
                                                            <button
                                                                key={optIdx}
                                                                onClick={() => !showResults && handleAnswer(q.id, optIdx)}
                                                                disabled={showResults}
                                                                className={`w-full text-left p-3 rounded-md border transition-all flex justify-between items-center
                                                                    ${!showResults && quizState[q.id] === optIdx ? 'bg-indigo-50 border-indigo-500 text-indigo-700' : ''}
                                                                    ${!showResults && quizState[q.id] !== optIdx ? 'hover:bg-gray-50 border-gray-200' : ''}
                                                                    ${showResults && q.answer === optIdx ? 'bg-green-100 border-green-500 text-green-800 font-semibold' : ''}
                                                                    ${showResults && quizState[q.id] === optIdx && q.answer !== optIdx ? 'bg-red-100 border-red-500 text-red-800' : ''}
                                                                `}
                                                            >
                                                                {opt}
                                                                {showResults && q.answer === optIdx && <div className="text-green-600"><Icons.CheckCircle /></div>}
                                                                {showResults && quizState[q.id] === optIdx && q.answer !== optIdx && <div className="text-red-600"><Icons.XCircle /></div>}
                                                            </button>
                                                        ))}
                                                    </div>

                                                    {/* Explanation Reveal */}
                                                    {showResults && (
                                                        <div className="mt-6 pt-4 border-t border-gray-100 animate-fadeIn">
                                                            <details className="group">
                                                                <summary className="flex items-center gap-2 cursor-pointer text-indigo-600 font-semibold select-none">
                                                                    <Icons.Eye /> View Explanation
                                                                    <div className="transition-transform group-open:rotate-180"><Icons.ChevronDown /></div>
                                                                </summary>
                                                                <div className="mt-3 text-gray-700 bg-gray-50 p-4 rounded-lg">
                                                                    <p className="mb-2">{q.explanation}</p>
                                                                </div>
                                                            </details>
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>

                                <div className="mt-8 flex justify-end pb-10">
                                    {!showResults ? (
                                        <button 
                                            onClick={() => setShowResults(true)}
                                            disabled={Object.keys(quizState).length < chunks[currentQuizChunk].length}
                                            className={`px-8 py-3 rounded-lg font-bold shadow-md transition
                                                ${Object.keys(quizState).length < chunks[currentQuizChunk].length 
                                                    ? 'bg-gray-300 text-gray-500 cursor-not-allowed' 
                                                    : 'bg-indigo-600 text-white hover:bg-indigo-700'}`}
                                        >
                                            Submit Quiz
                                        </button>
                                    ) : (
                                        <button 
                                            onClick={nextChunk}
                                            className="flex items-center gap-2 px-8 py-3 bg-indigo-600 text-white rounded-lg font-bold shadow-md hover:bg-indigo-700 transition"
                                        >
                                            {currentQuizChunk < chunks.length - 1 ? 'Next Quiz Set' : 'Finish & Return Home'} <Icons.ArrowRight />
                                        </button>
                                    )}
                                </div>
                            </div>
                        )}
                    </main>
                    
                    {/* FOOTER */}
                    <footer className="bg-gray-100 p-6 text-center border-t border-gray-200 mt-auto">
                        <p className="text-gray-600 mb-2">Study Pulse v4.0</p>
                        <a 
                            href="https://docs.google.com/forms/d/e/1FAIpQLSdjFjiMzpR4qAacIY9r2SoqiPgOeTF6uQ1I8JRFudKBWUSY4A/viewform?usp=publish-editor" 
                            target="_blank" 
                            rel="noopener noreferrer"
                            className="inline-flex items-center gap-2 text-indigo-600 hover:text-indigo-800 font-medium transition-colors"
                        >
                            <span className="underline">Fill out the Feedback Form</span>
                        </a>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


